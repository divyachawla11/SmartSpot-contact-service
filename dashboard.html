<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - SmartSpot Parking Management</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar">
    <div class="container">
      <div class="navbar-content">
        <a href="index.html" class="logo">
          <div class="logo-icon">
            <i class="fas fa-car"></i>
          </div>
          <span>SmartSpot</span>
        </a>

        <!-- Desktop Navigation -->
        <div class="nav-links">
          <a href="index.html" class="nav-link">Home</a>
          <a href="#" class="nav-link">Services</a>
          <a href="about.html" class="nav-link">About Us</a>
          <a href="dashboard.html" class="nav-link active">Dashboard</a>
          <a href="contact.html" class="nav-link">Contact</a>
        </div>

        <!-- Desktop CTA -->
        <div class="nav-cta">
          <a href="#" class="btn btn-outline">Sign In</a>
          <a href="#" class="btn btn-primary">Get Started</a>
        </div>

        <!-- Mobile Menu Button -->
        <button class="mobile-menu-btn" id="mobileMenuBtn">
          <i class="fas fa-bars"></i>
        </button>
      </div>

      <!-- Mobile Navigation -->
      <div class="mobile-menu" id="mobileMenu">
        <a href="index.html" class="nav-link">Home</a>
        <a href="#" class="nav-link">Services</a>
        <a href="about.html" class="nav-link">About Us</a>
        <a href="dashboard.html" class="nav-link active">Dashboard</a>
        <a href="contact.html" class="nav-link">Contact</a>
        <div class="mobile-cta">
          <a href="#" class="btn btn-outline">Sign In</a>
          <a href="#" class="btn btn-primary">Get Started</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="dashboard-main">
    <div class="container">
      <!-- Dashboard Header -->
      <div class="dashboard-header">
        <h1 class="dashboard-title">SmartSpot Dashboard</h1>
        <p class="dashboard-subtitle">Find and monitor parking facilities near you</p>
      </div>

      <div class="dashboard-layout">
        <!-- Left Panel - Location & Facilities -->
        <div class="dashboard-left">
          <!-- Location Search -->
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">
                <i class="fas fa-map-marker-alt"></i>
                Location Search
              </h2>
            </div>
            <div class="card-content">
              <div class="location-search">
                <div class="search-input-group">
                  <input type="text" id="locationInput" placeholder="Enter your location..." class="location-input">
                  <button class="btn btn-secondary" id="fetchLocationBtn">
                    <i class="fas fa-crosshairs"></i>
                    Fetch Location
                  </button>
                </div>
                <button class="btn btn-primary btn-block" id="searchBtn">
                  <i class="fas fa-search"></i>
                  Search Nearby Facilities
                </button>
              </div>
              
              <!-- Current Location Display -->
              <div class="current-location" id="currentLocation" style="display: none;">
                <div class="location-info">
                  <i class="fas fa-map-pin text-green"></i>
                  <span id="locationText">Current Location</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Nearby Facilities -->
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">
                <i class="fas fa-building"></i>
                Nearby Facilities
              </h2>
              <div class="facility-filters">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="mall">Malls</button>
                <button class="filter-btn" data-filter="hospital">Hospitals</button>
              </div>
            </div>
            <div class="card-content">
              <div class="facilities-list" id="facilitiesList">
                <!-- Facilities will be populated here -->
                <div class="no-facilities">
                  <i class="fas fa-search text-muted"></i>
                  <p>Search for a location to find nearby parking facilities</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Panel - Live Feed & Stats -->
        <div class="dashboard-right">
          <!-- Live Video Feed -->
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">
                <i class="fas fa-video"></i>
                Live Camera Feed
              </h2>
              <div class="live-indicator">
                <div class="live-dot"></div>
                <span>LIVE</span>
              </div>
            </div>
            <div class="card-content">
              <div class="video-container" id="videoContainer">
                <div class="video-placeholder">
                  <i class="fas fa-video-slash"></i>
                  <p>Select a facility to view live feed</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Facility Stats -->
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">
                <i class="fas fa-chart-bar"></i>
                Facility Statistics
              </h2>
            </div>
            <div class="card-content">
              <div class="stats-container" id="statsContainer">
                <div class="stats-placeholder">
                  <i class="fas fa-chart-line text-muted"></i>
                  <p>Select a facility to view statistics</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">
                <i class="fas fa-bolt"></i>
                Quick Actions
              </h2>
            </div>
            <div class="card-content">
              <div class="quick-actions">
                <button class="action-btn" id="reserveSpotBtn" disabled>
                  <i class="fas fa-bookmark"></i>
                  Reserve Spot
                </button>
                <button class="action-btn" id="getDirectionsBtn" disabled>
                  <i class="fas fa-route"></i>
                  Get Directions
                </button>
                <button class="action-btn" id="shareLocationBtn" disabled>
                  <i class="fas fa-share"></i>
                  Share Location
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <!-- Company Info -->
        <div class="footer-company">
          <a href="index.html" class="logo">
            <div class="logo-icon">
              <i class="fas fa-car"></i>
            </div>
            <span>SmartSpot</span>
          </a>
          <p class="footer-description">
            Revolutionizing parking management with smart technology solutions for a better urban mobility experience.
          </p>
          <div class="social-links">
            <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
            <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a>
            <a href="#" class="social-link"><i class="fab fa-github"></i></a>
            <a href="#" class="social-link"><i class="fas fa-envelope"></i></a>
          </div>
        </div>

        <!-- Product -->
        <div class="footer-links">
          <h3 class="footer-title">Product</h3>
          <ul>
            <li><a href="demo.html">Demo</a></li>
            <li><a href="#">Features</a></li>
            <li><a href="#">Pricing</a></li>
            <li><a href="#">API</a></li>
          </ul>
        </div>

        <!-- Company -->
        <div class="footer-links">
          <h3 class="footer-title">Company</h3>
          <ul>
            <li><a href="about.html">About</a></li>
            <li><a href="#">Careers</a></li>
            <li><a href="#">Blog</a></li>
            <li><a href="#">Press</a></li>
          </ul>
        </div>

        <!-- Support -->
        <div class="footer-links">
          <h3 class="footer-title">Support</h3>
          <ul>
            <li><a href="help.html">Help Center</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="#">Status</a></li>
            <li><a href="#">Privacy</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <p class="copyright">Â© 2024 SmartSpot. All rights reserved.</p>
        <div class="legal-links">
          <a href="#">Terms of Service</a>
          <a href="#">Privacy Policy</a>
          <a href="#">Cookie Policy</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Sample data for nearby facilities
    const sampleFacilities = [
      {
        id: 1,
        name: "City Center Mall",
        type: "mall",
        distance: "0.5 km",
        availableSpots: 45,
        totalSpots: 200,
        accuracy: 98.5,
        address: "123 Main Street, Downtown",
        status: "open"
      },
      {
        id: 2,
        name: "Metro General Hospital",
        type: "hospital",
        distance: "0.8 km",
        availableSpots: 12,
        totalSpots: 80,
        accuracy: 99.2,
        address: "456 Health Avenue, Medical District",
        status: "open"
      },
      {
        id: 3,
        name: "Grand Plaza Shopping Center",
        type: "mall",
        distance: "1.2 km",
        availableSpots: 78,
        totalSpots: 350,
        accuracy: 97.8,
        address: "789 Commerce Blvd, Shopping District",
        status: "open"
      },
      {
        id: 4,
        name: "St. Mary's Medical Center",
        type: "hospital",
        distance: "1.5 km",
        availableSpots: 8,
        totalSpots: 120,
        accuracy: 99.1,
        address: "321 Care Street, Healthcare Plaza",
        status: "open"
      },
      {
        id: 5,
        name: "Westfield Shopping Mall",
        type: "mall",
        distance: "2.1 km",
        availableSpots: 156,
        totalSpots: 500,
        accuracy: 98.9,
        address: "654 Retail Road, West End",
        status: "open"
      }
    ];

    let selectedFacility = null;

    // Mobile menu toggle
    document.getElementById('mobileMenuBtn').addEventListener('click', function() {
      const mobileMenu = document.getElementById('mobileMenu');
      const menuIcon = this.querySelector('i');
      
      if (mobileMenu.classList.contains('active')) {
        mobileMenu.classList.remove('active');
        menuIcon.classList.remove('fa-times');
        menuIcon.classList.add('fa-bars');
      } else {
        mobileMenu.classList.add('active');
        menuIcon.classList.remove('fa-bars');
        menuIcon.classList.add('fa-times');
      }
    });

    // Fetch current location
    document.getElementById('fetchLocationBtn').addEventListener('click', function() {
      const btn = this;
      const originalText = btn.innerHTML;
      
      btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Fetching...';
      btn.disabled = true;

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function(position) {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            
            // Simulate reverse geocoding
            setTimeout(() => {
              document.getElementById('locationInput').value = `Current Location (${lat.toFixed(4)}, ${lng.toFixed(4)})`;
              document.getElementById('currentLocation').style.display = 'block';
              document.getElementById('locationText').textContent = `Lat: ${lat.toFixed(4)}, Lng: ${lng.toFixed(4)}`;
              
              btn.innerHTML = originalText;
              btn.disabled = false;
            }, 1500);
          },
          function(error) {
            alert('Unable to fetch location. Please enter manually.');
            btn.innerHTML = originalText;
            btn.disabled = false;
          }
        );
      } else {
        alert('Geolocation is not supported by this browser.');
        btn.innerHTML = originalText;
        btn.disabled = false;
      }
    });

    // Search for nearby facilities
    document.getElementById('searchBtn').addEventListener('click', function() {
      const location = document.getElementById('locationInput').value;
      if (!location.trim()) {
        alert('Please enter a location first.');
        return;
      }

      const btn = this;
      const originalText = btn.innerHTML;
      
      btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Searching...';
      btn.disabled = true;

      // Simulate API call
      setTimeout(() => {
        displayFacilities(sampleFacilities);
        btn.innerHTML = originalText;
        btn.disabled = false;
      }, 2000);
    });

    // Filter facilities
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        
        const filter = this.dataset.filter;
        const facilities = filter === 'all' ? sampleFacilities : sampleFacilities.filter(f => f.type === filter);
        displayFacilities(facilities);
      });
    });

    function displayFacilities(facilities) {
      const container = document.getElementById('facilitiesList');
      
      if (facilities.length === 0) {
        container.innerHTML = `
          <div class="no-facilities">
            <i class="fas fa-search text-muted"></i>
            <p>No facilities found for the selected filter</p>
          </div>
        `;
        return;
      }

      container.innerHTML = facilities.map(facility => `
        <div class="facility-item" onclick="selectFacility(${facility.id})">
          <div class="facility-header">
            <div class="facility-info">
              <h3 class="facility-name">${facility.name}</h3>
              <div class="facility-meta">
                <span class="facility-type ${facility.type}">
                  <i class="fas fa-${facility.type === 'mall' ? 'shopping-bag' : 'hospital'}"></i>
                  ${facility.type.charAt(0).toUpperCase() + facility.type.slice(1)}
                </span>
                <span class="facility-distance">
                  <i class="fas fa-map-marker-alt"></i>
                  ${facility.distance}
                </span>
              </div>
            </div>
            <div class="facility-status ${facility.status}">
              <div class="status-dot"></div>
              ${facility.status.charAt(0).toUpperCase() + facility.status.slice(1)}
            </div>
          </div>
          <div class="facility-address">
            <i class="fas fa-location-arrow"></i>
            ${facility.address}
          </div>
          <div class="facility-stats">
            <div class="stat">
              <span class="stat-value">${facility.availableSpots}</span>
              <span class="stat-label">Available</span>
            </div>
            <div class="stat">
              <span class="stat-value">${facility.totalSpots}</span>
              <span class="stat-label">Total</span>
            </div>
            <div class="stat">
              <span class="stat-value">${facility.accuracy}%</span>
              <span class="stat-label">Accuracy</span>
            </div>
          </div>
        </div>
      `).join('');
    }

    function selectFacility(facilityId) {
      selectedFacility = sampleFacilities.find(f => f.id === facilityId);
      
      // Highlight selected facility
      document.querySelectorAll('.facility-item').forEach(item => item.classList.remove('selected'));
      event.currentTarget.classList.add('selected');
      
      // Update video feed
      updateVideoFeed(selectedFacility);
      
      // Update stats
      updateStats(selectedFacility);
      
      // Enable quick actions
      document.getElementById('reserveSpotBtn').disabled = false;
      document.getElementById('getDirectionsBtn').disabled = false;
      document.getElementById('shareLocationBtn').disabled = false;
    }

    function updateVideoFeed(facility) {
      const container = document.getElementById('videoContainer');
      container.innerHTML = `
        <div class="video-feed">
          <video autoplay muted loop class="live-video">
            <source src="/placeholder-video.mp4" type="video/mp4">
            <!-- Placeholder for live video stream -->
          </video>
          <div class="video-overlay">
            <div class="video-info">
              <h4>${facility.name}</h4>
              <p>Live Camera Feed - Parking Area</p>
            </div>
            <div class="video-controls">
              <button class="video-btn"><i class="fas fa-expand"></i></button>
              <button class="video-btn"><i class="fas fa-volume-mute"></i></button>
            </div>
          </div>
        </div>
      `;
    }

    function updateStats(facility) {
      const container = document.getElementById('statsContainer');
      const occupancyRate = Math.round(((facility.totalSpots - facility.availableSpots) / facility.totalSpots) * 100);
      
      container.innerHTML = `
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon green">
              <i class="fas fa-parking"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">${facility.availableSpots}</div>
              <div class="stat-label">Available Spots</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon blue">
              <i class="fas fa-car"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">${facility.totalSpots}</div>
              <div class="stat-label">Total Spots</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon purple">
              <i class="fas fa-percentage"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">${occupancyRate}%</div>
              <div class="stat-label">Occupancy Rate</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon orange">
              <i class="fas fa-bullseye"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number">${facility.accuracy}%</div>
              <div class="stat-label">Accuracy</div>
            </div>
          </div>
        </div>
        
        <div class="occupancy-chart">
          <div class="chart-header">
            <h4>Real-time Occupancy</h4>
            <span class="chart-time">Last updated: ${new Date().toLocaleTimeString()}</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: ${occupancyRate}%"></div>
          </div>
          <div class="chart-labels">
            <span>0%</span>
            <span>50%</span>
            <span>100%</span>
          </div>
        </div>
      `;
    }

    // Quick action handlers
    document.getElementById('reserveSpotBtn').addEventListener('click', function() {
      if (selectedFacility) {
        alert(`Reservation request sent for ${selectedFacility.name}`);
      }
    });

    document.getElementById('getDirectionsBtn').addEventListener('click', function() {
      if (selectedFacility) {
        alert(`Opening directions to ${selectedFacility.name}`);
      }
    });

    document.getElementById('shareLocationBtn').addEventListener('click', function() {
      if (selectedFacility) {
        alert(`Sharing location of ${selectedFacility.name}`);
      }
    });
  </script>
</body>
</html>